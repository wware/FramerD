(define (main phase)
  (cond ((equal? phase "clean")
	 (if (file-exists? "sctemp.pool") (remove-file "sctemp.pool")))
	((equal? phase "init")
	 (make-file-pool "sctemp.pool" 128 @17/0))
	((equal? phase "make")
	 (let ((p (use-pool "sctemp.pool")))
	   (frame-create p 'obj-name "Test" 'x 3 'y 4)
	   (commit-all)))
	((equal? phase "change")
	 (let* ((p (use-pool "sctemp.pool"))
		(o (pool-base p)))
	   (cache-pool p)
	   (add! o 'z '99)
	   (commit-oid o)
	   (abort)))
	((equal? phase "test")
	 (let* ((p (use-pool "sctemp.pool"))
		(o (pool-base p)))
	   (if (test o 'z 99)
	       (warn " ==== OID was saved before abort")
	     (warn " ==== !!! Error: OID was not saved before abort"))))))
